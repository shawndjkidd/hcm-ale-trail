<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HCM Ale Trail</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
        body { margin: 0; padding: 0; background-color: #dc2626; }
        html, body { overflow-x: hidden; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script>
const e = React.createElement;
const { useState, useEffect } = React;

// ============================================
// GOOGLE SHEETS CONFIG
// ============================================
const GOOGLE_SHEETS_URL = 'https://script.google.com/macros/s/AKfycbzjNuqNOwv7fSUdqqv-05RphKQnoUK0706drE2AQTKJErenxwmuGvfNOS9aC5COk_tGWg/exec';
// ============================================

const block = { fontFamily: 'Impact, Haettenschweiler, "Arial Black", sans-serif', fontWeight: 900, letterSpacing: '0.5px', textTransform: 'uppercase' };
const breweryBlock = { ...block, letterSpacing: '1px', lineHeight: '0.95' };

const Instagram = ({size=24}) => e('svg', {width:size,height:size,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}, e('rect',{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}), e('path',{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}), e('line',{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"}));
const Facebook = ({size=24}) => e('svg', {width:size,height:size,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}, e('path',{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"}));
const Messenger = ({size=24}) => e('svg', {width:size,height:size,viewBox:"0 0 24 24",fill:"currentColor"}, e('path',{d:"M12 2C6.36 2 2 6.13 2 11.7c0 2.91 1.19 5.44 3.14 7.17.16.13.26.35.27.57l.05 1.78c.04.57.61.94 1.13.71l1.98-.87c.17-.08.36-.1.55-.06.91.25 1.87.38 2.88.38 5.64 0 10-4.13 10-9.7C22 6.13 17.64 2 12 2zm5.89 7.58l-2.89 4.58c-.45.73-1.44.91-2.13.39l-2.3-1.72a.6.6 0 0 0-.72 0l-3.1 2.36c-.41.32-.96-.17-.68-.61l2.89-4.58c.45-.73 1.44-.91 2.13-.39l2.3 1.72a.6.6 0 0 0 .72 0l3.1-2.36c.41-.32.96.17.68.61z"}));
const Copy = ({size=24}) => e('svg', {width:size,height:size,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}, e('rect',{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}), e('path',{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}));
const MapPin = ({size=24}) => e('svg', {width:size,height:size,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}, e('path',{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}), e('circle',{cx:"12",cy:"10",r:"3"}));
const Star = ({size=24,filled=false}) => e('svg', {width:size,height:size,viewBox:"0 0 24 24",fill:filled?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}, e('polygon',{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}));
const Beer = ({size=24}) => e('svg', {width:size,height:size,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}, e('path',{d:"M17 11h1a3 3 0 0 1 0 6h-1"}), e('path',{d:"M9 12v6"}), e('path',{d:"M13 12v6"}), e('path',{d:"M14 7.5c-1 0-1.44.5-3 .5s-2-.5-3-.5-1.72.5-2.5.5a2.5 2.5 0 0 1 0-5c.78 0 1.57.5 2.5.5S9.44 2.5 11 2.5s2 .5 3 .5 1.72-.5 2.5-.5a2.5 2.5 0 0 1 0 5c-.78 0-1.5-.5-2.5-.5Z"}), e('path',{d:"M5 8v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8"}));

function App() {
  const [stamps, setStamps] = useState(() => {
    try { return JSON.parse(localStorage.getItem('aletrail_stamps')) || []; } catch { return []; }
  });
  const [beerLogs, setBeerLogs] = useState(() => {
    try { return JSON.parse(localStorage.getItem('aletrail_beerlogs')) || []; } catch { return []; }
  });
  const [userInfo, setUserInfo] = useState(() => {
    try { return JSON.parse(localStorage.getItem('aletrail_user')) || null; } catch { return null; }
  });
  const [selected, setSelected] = useState(null);
  const [lang, setLang] = useState('en');
  const [code, setCode] = useState('');
  const [error, setError] = useState('');
  const [showFaq, setShowFaq] = useState(false);
  const [showQR, setShowQR] = useState(false);
  const [showBeerLog, setShowBeerLog] = useState(false);
  const [showMyBeers, setShowMyBeers] = useState(false);
  const [showCompletion, setShowCompletion] = useState(false);
  const [showRegister, setShowRegister] = useState(false);
  const [showSaveProgress, setShowSaveProgress] = useState(false);
  const [saveEmail, setSaveEmail] = useState('');
  const [saveSent, setSaveSent] = useState(false);
  const [copied, setCopied] = useState(false);
  const [showToast, setShowToast] = useState(false);
  const [toastMessage, setToastMessage] = useState('');
  
  // Registration form
  const [regName, setRegName] = useState('');
  const [regEmail, setRegEmail] = useState('');
  const [regPhone, setRegPhone] = useState('');
  const [pendingStamp, setPendingStamp] = useState(null);
  const [autoStamped, setAutoStamped] = useState(false);
  
  // Beer log form state
  const [beerName, setBeerName] = useState('');
  const [beerRating, setBeerRating] = useState(0);
  const [beerNotes, setBeerNotes] = useState('');
  
  // Completion form state
  const [completionName, setCompletionName] = useState(() => userInfo?.name || '');
  const [completionEmail, setCompletionEmail] = useState(() => userInfo?.email || '');
  const [completionPhone, setCompletionPhone] = useState(() => userInfo?.phone || '');
  const [completionSubmitted, setCompletionSubmitted] = useState(false);

  useEffect(() => {
    localStorage.setItem('aletrail_stamps', JSON.stringify(stamps));
  }, [stamps]);

  useEffect(() => {
    localStorage.setItem('aletrail_beerlogs', JSON.stringify(beerLogs));
  }, [beerLogs]);

  useEffect(() => {
    localStorage.setItem('aletrail_user', JSON.stringify(userInfo));
    // Pre-fill completion form if user already registered
    if (userInfo?.name && !completionName) setCompletionName(userInfo.name);
    if (userInfo?.email && !completionEmail) setCompletionEmail(userInfo.email);
    if (userInfo?.phone && !completionPhone) setCompletionPhone(userInfo.phone);
  }, [userInfo]);

  useEffect(() => {
    const params = new URLSearchParams(window.location.search);
    const stampId = parseInt(params.get('stamp'));
    const stampCode = params.get('code');
    if (stampId && stampCode && codes[stampId] === stampCode.toUpperCase()) {
      if (!stamps.includes(stampId)) {
        const b = breweries.find(x => x.id === stampId);
        // If no user registered yet, ask for info first
        if (!userInfo?.name && stamps.length === 0) {
          setPendingStamp({ id: stampId, brewery: b, method: 'QR' });
          setShowRegister(true);
        } else {
          // Already registered, just add stamp
          const newStamps = [...stamps, stampId];
          setStamps(newStamps);
          setAutoStamped(true);
          if (b) {
            setSelected(b);
            sendToSheets({
              type: 'stamp',
              visitorName: userInfo?.name || '',
              visitorEmail: userInfo?.email || '',
              brewery: b.name,
              breweryId: b.id,
              method: 'QR',
              stampCount: newStamps.length
            });
            // Auto backup recovery link
            setTimeout(() => autoBackup(newStamps.length), 500);
          }
          if (newStamps.length === 8) {
            setTimeout(() => setShowCompletion(true), 1500);
          }
        }
      }
      window.history.replaceState({}, '', window.location.pathname);
    }
  }, []);

  const links = { 
    website: 'https://www.hochiminhaletrail.com/', 
    maps: 'https://www.google.com/maps/d/u/1/viewer?usp=sharing&mid=1ZO-30TD2syibuwwqGF7wDxwHACOEsBQ', 
    ig: 'https://www.instagram.com/hcm.aletrail/', 
    msg: 'https://m.me/HoChiMinhAleTrail'
  };
  
  const codes = { 1:'BIACRAFT2024', 2:'DARKNESS2024', 3:'DEME2024', 4:'STEERSMAN2024', 5:'EASTWEST2024', 6:'ROOSTER2024', 7:'BRIDGES2024', 8:'BELGO2024' };
  
  // FULL TRANSLATIONS
  const txt = {
    en: { 
      stamps:"STAMPS", done:"DONE!", go:"GO!", code:"CODE", web:"WEBSITE", maps:"MAPS", faq:"FAQ", 
      how:"HOW TO PLAY", s1:"GO TO ANY BREWERY", s2:"BUY BEER & GET:", s2a:"QR CODE", s2b:"OR SECRET CODE", 
      s3:"GET STAMP!", s4:"8 STAMPS = FREE HAT!", rush:"NO RUSH!", scan:"SCAN QR", ask:"ASK FOR QR!", 
      ok:"OK!", nope:"NOPE!", copy:"¬© 2024 HCM ALE TRAIL", copyTag:"COPY", copied:"COPIED!", 
      directions:"DIRECTIONS", myBeers:"MY BEERS", addBeer:"ADD BEER", beerName:"BEER NAME",
      rating:"RATING", notes:"NOTES (OPTIONAL)", save:"SAVE", cancel:"CANCEL", noBeer:"NO BEERS LOGGED YET",
      complete:"CONGRATULATIONS!", completeMsg:"You completed the Ale Trail! Claim your FREE HAT at:",
      name:"NAME", email:"EMAIL", phone:"PHONE", submit:"SUBMIT", thanks:"THANKS!",
      collectHat:"Show this screen to collect your hat!", beersAt:"Beers at",
      welcome:"Welcome to the HCM Ale Trail! Visit 8 awesome taprooms across Saigon. Buy a drink, collect a stamp, and get a free Ale Trail hat at your last stop! No deadline ‚Äî do it in a day or a year.",
      tips:"KEEP YOUR STAMPS", tip1:"Always use the same browser (Safari OR Chrome, not both)", tip2:"Don't use Private/Incognito mode", tip3:"Don't clear browser data until you finish!",
      saveProgress:"SAVE PROGRESS", saveDesc:"Email yourself a recovery link", emailPlaceholder:"Enter your email", sendLink:"SEND RECOVERY LINK", linkSent:"CHECK YOUR EMAIL!", linkCopied:"LINK COPIED!",
      register:"START YOUR TRAIL!", regDesc:"Enter your info to track your progress", regNote:"We'll use this to link all your stamps & beers",
      tag1: "Funky names, creative food, and the OG craft beer hangout.",
      tag2: "Bold beers, bold branding. Known for IPAs, stouts, and indie taproom vibe.",
      tag3: "Underground feel with clean, small-batch brews. A local hidden gem.",
      tag4: "Approachable beers and chill vibes. Great for groups and newcomers.",
      tag5: "Sleek brewhouse with bold beers, food, and rooftop. Award-winning!",
      tag6: "Casual and affordable with clean styles. Great for local vibes.",
      tag7: "Born in Da Nang, focused on sustainability. Always something new!",
      tag8: "Rich Belgian-style beers in a medieval space. Perfect for big pours."
    },
    vi: { 
      stamps:"TEM", done:"XONG!", go:"OK!", code:"M√É", web:"WEBSITE", maps:"B·∫¢N ƒê·ªí", faq:"FAQ", 
      how:"C√ÅCH CH∆†I", s1:"ƒê·∫æN QU√ÅN BIA", s2:"MUA BIA & L·∫§Y:", s2a:"M√É QR", s2b:"HO·∫∂C M√É S·ªê", 
      s3:"NH·∫¨N TEM!", s4:"8 TEM = M≈® FREE!", rush:"T·ª™ T·ª™!", scan:"QU√âT QR", ask:"H·ªéI M√É QR!", 
      ok:"OK!", nope:"SAI!", copy:"¬© 2024 ALE TRAIL", copyTag:"SAO CH√âP", copied:"ƒê√É SAO CH√âP!", 
      directions:"CH·ªà ƒê∆Ø·ªúNG", myBeers:"BIA C·ª¶A T√îI", addBeer:"TH√äM BIA", beerName:"T√äN BIA",
      rating:"ƒê√ÅNH GI√Å", notes:"GHI CH√ö (T√ôY CH·ªåN)", save:"L∆ØU", cancel:"H·ª¶Y", noBeer:"CH∆ØA C√ì BIA N√ÄO",
      complete:"CH√öC M·ª™NG!", completeMsg:"B·∫°n ƒë√£ ho√†n th√†nh Ale Trail! Nh·∫≠n M≈® MI·ªÑN PH√ç t·∫°i:",
      name:"T√äN", email:"EMAIL", phone:"S·ªê ƒêI·ªÜN THO·∫†I", submit:"G·ª¨I", thanks:"C·∫¢M ∆†N!",
      collectHat:"Cho nh√¢n vi√™n xem m√†n h√¨nh n√†y ƒë·ªÉ nh·∫≠n m≈©!", beersAt:"Bia t·∫°i",
      welcome:"Ch√†o m·ª´ng ƒë·∫øn HCM Ale Trail! Gh√© 8 qu√°n bia th·ªß c√¥ng ·ªü S√†i G√≤n. Mua bia, l·∫•y tem, ƒë·ªïi m≈© mi·ªÖn ph√≠! Kh√¥ng gi·ªõi h·∫°n th·ªùi gian.",
      tips:"GI·ªÆ TEM C·ª¶A B·∫†N", tip1:"Lu√¥n d√πng c√πng 1 tr√¨nh duy·ªát (Safari HO·∫∂C Chrome)", tip2:"Kh√¥ng d√πng ch·∫ø ƒë·ªô ·∫©n danh", tip3:"Kh√¥ng x√≥a d·ªØ li·ªáu tr√¨nh duy·ªát!",
      saveProgress:"L∆ØU TI·∫æN TR√åNH", saveDesc:"G·ª≠i link kh√¥i ph·ª•c qua email", emailPlaceholder:"Nh·∫≠p email c·ªßa b·∫°n", sendLink:"G·ª¨I LINK", linkSent:"KI·ªÇM TRA EMAIL!", linkCopied:"ƒê√É SAO CH√âP!",
      register:"B·∫ÆT ƒê·∫¶U H√ÄNH TR√åNH!", regDesc:"Nh·∫≠p th√¥ng tin ƒë·ªÉ theo d√µi ti·∫øn tr√¨nh", regNote:"Ch√∫ng t√¥i s·∫Ω d√πng ƒë·ªÉ li√™n k·∫øt t·∫•t c·∫£ tem v√† bia c·ªßa b·∫°n",
      tag1: "T√™n ƒë·ªôc ƒë√°o, ƒë·ªì ƒÉn s√°ng t·∫°o, v√† qu√°n bia th·ªß c√¥ng ƒë·∫ßu ti√™n c·ªßa S√†i G√≤n.",
      tag2: "Bia ƒë·∫≠m ƒë√†, th∆∞∆°ng hi·ªáu n·ªïi b·∫≠t. N·ªïi ti·∫øng v·ªõi IPA, stout v√† kh√¥ng gian indie.",
      tag3: "Phong c√°ch underground v·ªõi bia nh·ªè m·∫ª, s·∫°ch. Vi√™n ng·ªçc ·∫©n c·ªßa ƒë·ªãa ph∆∞∆°ng.",
      tag4: "Bia d·ªÖ u·ªëng v√† kh√¥ng gian th∆∞ gi√£n. Tuy·ªát v·ªùi cho nh√≥m v√† ng∆∞·ªùi m·ªõi.",
      tag5: "Nh√† m√°y bia sang tr·ªçng v·ªõi bia ƒë·∫≠m, ƒë·ªì ƒÉn v√† s√¢n th∆∞·ª£ng. ƒê·∫°t nhi·ªÅu gi·∫£i th∆∞·ªüng!",
      tag6: "Tho·∫£i m√°i v√† gi√° c·∫£ ph·∫£i chƒÉng. Tuy·ªát v·ªùi cho kh√¥ng kh√≠ ƒë·ªãa ph∆∞∆°ng.",
      tag7: "Sinh ra ·ªü ƒê√† N·∫µng, t·∫≠p trung v√†o b·ªÅn v·ªØng. Lu√¥n c√≥ ƒëi·ªÅu m·ªõi m·∫ª!",
      tag8: "Bia ki·ªÉu B·ªâ ƒë·∫≠m ƒë√† trong kh√¥ng gian trung c·ªï. Ho√†n h·∫£o cho ly l·ªõn."
    },
    ko: { 
      stamps:"Ïä§ÌÉ¨ÌîÑ", done:"ÏôÑÎ£å!", go:"ÌôïÏù∏!", code:"ÏΩîÎìú", web:"ÏõπÏÇ¨Ïù¥Ìä∏", maps:"ÏßÄÎèÑ", faq:"FAQ", 
      how:"Ï∞∏Ïó¨ Î∞©Î≤ï", s1:"ÏñëÏ°∞Ïû• Î∞©Î¨∏", s2:"Îß•Ï£º Íµ¨Îß§ ÌõÑ:", s2a:"QR ÏΩîÎìú", s2b:"ÎòêÎäî ÎπÑÎ∞ÄÏΩîÎìú", 
      s3:"Ïä§ÌÉ¨ÌîÑ Î∞õÍ∏∞!", s4:"8Í∞ú = Î¨¥Î£å Î™®Ïûê!", rush:"Ï≤úÏ≤úÌûà!", scan:"QR Ïä§Ï∫î", ask:"QR ÏöîÏ≤≠!", 
      ok:"OK!", nope:"Ïò§Î•ò!", copy:"¬© 2024 HCM", copyTag:"Î≥µÏÇ¨", copied:"Î≥µÏÇ¨Îê®!", 
      directions:"Í∏∏Ï∞æÍ∏∞", myBeers:"ÎÇ¥ Îß•Ï£º", addBeer:"Îß•Ï£º Ï∂îÍ∞Ä", beerName:"Îß•Ï£º Ïù¥Î¶Ñ",
      rating:"ÌèâÏ†ê", notes:"Î©îÎ™® (ÏÑ†ÌÉù)", save:"Ï†ÄÏû•", cancel:"Ï∑®ÏÜå", noBeer:"Í∏∞Î°ùÎêú Îß•Ï£º ÏóÜÏùå",
      complete:"Ï∂ïÌïòÌï©ÎãàÎã§!", completeMsg:"Ale Trail ÏôÑÎ£å! Î¨¥Î£å Î™®ÏûêÎ•º Î∞õÏúºÏÑ∏Ïöî:",
      name:"Ïù¥Î¶Ñ", email:"Ïù¥Î©îÏùº", phone:"Ï†ÑÌôîÎ≤àÌò∏", submit:"Ï†úÏ∂ú", thanks:"Í∞êÏÇ¨Ìï©ÎãàÎã§!",
      collectHat:"Ïù¥ ÌôîÎ©¥ÏùÑ Î≥¥Ïó¨Ï£ºÍ≥† Î™®ÏûêÎ•º Î∞õÏúºÏÑ∏Ïöî!", beersAt:"Îß•Ï£º:",
      welcome:"HCM Ale TrailÏóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§! ÏÇ¨Ïù¥Í≥µÏùò 8Í∞ú ÌÉ≠Î£∏ÏùÑ Î∞©Î¨∏ÌïòÏÑ∏Ïöî. ÏùåÎ£åÎ•º ÏÇ¨Í≥†, Ïä§ÌÉ¨ÌîÑÎ•º Î™®ÏúºÍ≥†, ÎßàÏßÄÎßâÏóê Î¨¥Î£å Î™®ÏûêÎ•º Î∞õÏúºÏÑ∏Ïöî!",
      tips:"Ïä§ÌÉ¨ÌîÑ Ïú†ÏßÄ ÌåÅ", tip1:"Ìï≠ÏÉÅ Í∞ôÏùÄ Î∏åÎùºÏö∞Ï†Ä ÏÇ¨Ïö© (Safari ÎòêÎäî Chrome)", tip2:"ÏãúÌÅ¨Î¶ø/ÌîÑÎùºÏù¥Îπó Î™®Îìú ÏÇ¨Ïö© Í∏àÏßÄ", tip3:"ÏôÑÎ£å Ï†Ñ Î∏åÎùºÏö∞Ï†Ä Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú Í∏àÏßÄ!",
      saveProgress:"ÏßÑÌñâ Ï†ÄÏû•", saveDesc:"Î≥µÍµ¨ ÎßÅÌÅ¨Î•º Ïù¥Î©îÏùºÎ°ú Î∞õÍ∏∞", emailPlaceholder:"Ïù¥Î©îÏùº ÏûÖÎ†•", sendLink:"ÎßÅÌÅ¨ Ï†ÑÏÜ°", linkSent:"Ïù¥Î©îÏùº ÌôïÏù∏!", linkCopied:"Î≥µÏÇ¨Îê®!",
      register:"ÏãúÏûëÌïòÍ∏∞!", regDesc:"ÏßÑÌñâ ÏÉÅÌô©ÏùÑ Ï∂îÏ†ÅÌïòÎ†§Î©¥ Ï†ïÎ≥¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî", regNote:"Î™®Îì† Ïä§ÌÉ¨ÌîÑÏôÄ Îß•Ï£ºÎ•º Ïó∞Í≤∞ÌïòÎäî Îç∞ ÏÇ¨Ïö©Îê©ÎãàÎã§",
      tag1: "ÎèÖÌäπÌïú Ïù¥Î¶Ñ, Ï∞ΩÏùòÏ†ÅÏù∏ ÏùåÏãù, Ïò§Î¶¨ÏßÄÎÑê ÌÅ¨ÎûòÌîÑÌä∏ ÎπÑÏñ¥ Î™ÖÏÜå.",
      tag2: "ÎåÄÎã¥Ìïú Îß•Ï£º, ÎåÄÎã¥Ìïú Î∏åÎûúÎî©. IPA, Ïä§ÌÉÄÏö∞Ìä∏, Ïù∏Îîî ÌÉ≠Î£∏ Î∂ÑÏúÑÍ∏∞Î°ú Ïú†Î™Ö.",
      tag3: "Ïñ∏ÎçîÍ∑∏ÎùºÏö¥Îìú ÎäêÎÇåÏùò ÍπîÎÅîÌïú ÏÜåÍ∑úÎ™® ÏñëÏ°∞Ïû•. Ïà®Í≤®ÏßÑ Î≥¥ÏÑù.",
      tag4: "ÏπúÍ∑ºÌïú Îß•Ï£ºÏôÄ Ìé∏ÏïàÌïú Î∂ÑÏúÑÍ∏∞. Í∑∏Î£πÍ≥º ÏûÖÎ¨∏ÏûêÏóêÍ≤å Ï¢ãÏùå.",
      tag5: "ÏÑ∏Î†®Îêú ÏñëÏ°∞Ïû•, ÎåÄÎã¥Ìïú Îß•Ï£º, ÏùåÏãù, Î£®ÌîÑÌÉë. ÏàòÏÉÅ Í≤ΩÎ†•!",
      tag6: "Ï∫êÏ£ºÏñºÌïòÍ≥† Ï†ÄÎ†¥Ìïú ÍπîÎÅîÌïú Ïä§ÌÉÄÏùº. Î°úÏª¨ Î∂ÑÏúÑÍ∏∞Ïóê Îî±.",
      tag7: "Îã§ÎÇ≠ÏóêÏÑú ÏãúÏûë, ÏßÄÏÜçÍ∞ÄÎä•ÏÑ±Ïóê ÏßëÏ§ë. Ìï≠ÏÉÅ ÏÉàÎ°úÏö¥ Í≤É!",
      tag8: "Ï§ëÏÑ∏Ìíç Í≥µÍ∞ÑÏùò Î≤®Í∏∞Ïóê Ïä§ÌÉÄÏùº Îß•Ï£º. ÌÅ∞ ÏûîÏóê Îî±."
    },
    ja: { 
      stamps:"„Çπ„Çø„É≥„Éó", done:"ÂÆå‰∫Ü!", go:"OK!", code:"„Ç≥„Éº„Éâ", web:"„Ç¶„Çß„Éñ", maps:"Âú∞Âõ≥", faq:"FAQ", 
      how:"ÈÅä„Å≥Êñπ", s1:"ÈÜ∏ÈÄ†ÊâÄ„Å∏Ë°å„Åè", s2:"„Éì„Éº„É´Ë≥ºÂÖ•„Åß:", s2a:"QR„Ç≥„Éº„Éâ", s2b:"„Åæ„Åü„ÅØÁßòÂØÜ„Ç≥„Éº„Éâ", 
      s3:"„Çπ„Çø„É≥„Éó„Ç≤„ÉÉ„Éà!", s4:"8ÂÄã=ÁÑ°ÊñôÂ∏ΩÂ≠ê!", rush:"„ÇÜ„Å£„Åè„Çä!", scan:"QR„Çπ„Ç≠„É£„É≥", ask:"QRËÅû„ÅÑ„Å¶!", 
      ok:"OK!", nope:"ÈÅï„ÅÜ!", copy:"¬© 2024 HCM", copyTag:"„Ç≥„Éî„Éº", copied:"„Ç≥„Éî„ÉºÂÆå‰∫Ü!", 
      directions:"ÈÅìÊ°àÂÜÖ", myBeers:"„Éû„Ç§„Éì„Éº„É´", addBeer:"„Éì„Éº„É´ËøΩÂä†", beerName:"„Éì„Éº„É´Âêç",
      rating:"Ë©ï‰æ°", notes:"„É°„É¢Ôºà‰ªªÊÑèÔºâ", save:"‰øùÂ≠ò", cancel:"„Ç≠„É£„É≥„Çª„É´", noBeer:"Ë®òÈå≤„Å™„Åó",
      complete:"„Åä„ÇÅ„Åß„Å®„ÅÜ!", completeMsg:"Ale TrailÂÆå‰∫ÜÔºÅÁÑ°Êñô„ÅÆÂ∏ΩÂ≠ê„Çí„Ç≤„ÉÉ„Éà:",
      name:"ÂêçÂâç", email:"„É°„Éº„É´", phone:"ÈõªË©±Áï™Âè∑", submit:"ÈÄÅ‰ø°", thanks:"„ÅÇ„Çä„Åå„Å®„ÅÜ!",
      collectHat:"„Åì„ÅÆÁîªÈù¢„ÇíË¶ã„Åõ„Å¶Â∏ΩÂ≠ê„Çí„ÇÇ„Çâ„Åä„ÅÜ!", beersAt:"„Éì„Éº„É´:",
      welcome:"HCM Ale Trail„Å∏„Çà„ÅÜ„Åì„ÅùÔºÅ„Çµ„Ç§„Ç¥„É≥„ÅÆ8„Å§„ÅÆ„Çø„ÉÉ„Éó„É´„Éº„É†„ÇíË®™„Çå„Å¶„ÄÅ„Éâ„É™„É≥„ÇØ„ÇíË≤∑„ÅÑ„ÄÅ„Çπ„Çø„É≥„Éó„ÇíÈõÜ„ÇÅ„Å¶„ÄÅÁÑ°Êñô„ÅÆÂ∏ΩÂ≠ê„Çí„Ç≤„ÉÉ„Éà„Åó„Çà„ÅÜÔºÅ",
      tips:"„Çπ„Çø„É≥„Éó„ÇíÂÆà„Çã", tip1:"Âêå„Åò„Éñ„É©„Ç¶„Ç∂„Çí‰ΩøÁî®ÔºàSafari„ÅãChrome„Å©„Å°„Çâ„ÅãÔºâ", tip2:"„Éó„É©„Ç§„Éô„Éº„Éà„É¢„Éº„Éâ‰ΩøÁî®Á¶ÅÊ≠¢", tip3:"ÂÆå‰∫Ü„Åæ„Åß„Éá„Éº„ÇøÂâäÈô§Á¶ÅÊ≠¢ÔºÅ",
      saveProgress:"ÈÄ≤Êçó„Çí‰øùÂ≠ò", saveDesc:"Âæ©ÂÖÉ„É™„É≥„ÇØ„Çí„É°„Éº„É´„ÅßÂèó„ÅëÂèñ„Çã", emailPlaceholder:"„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ", sendLink:"„É™„É≥„ÇØÈÄÅ‰ø°", linkSent:"„É°„Éº„É´Á¢∫Ë™çÔºÅ", linkCopied:"„Ç≥„Éî„ÉºÂÆå‰∫ÜÔºÅ",
      register:"„Çπ„Çø„Éº„Éà!", regDesc:"ÈÄ≤Êçó„ÇíËøΩË∑°„Åô„Çã„Å´„ÅØÊÉÖÂ†±„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ", regNote:"„Åô„Åπ„Å¶„ÅÆ„Çπ„Çø„É≥„Éó„Å®„Éì„Éº„É´„Çí„É™„É≥„ÇØ„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô",
      tag1: "„É¶„Éã„Éº„ÇØ„Å™ÂêçÂâç„ÄÅÂâµÈÄ†ÁöÑ„Å™ÊñôÁêÜ„ÄÅÂÖÉÁ•ñ„ÇØ„É©„Éï„Éà„Éì„Éº„É´„ÅÆËÅñÂú∞„ÄÇ",
      tag2: "Â§ßËÉÜ„Å™„Éì„Éº„É´„ÄÅÂ§ßËÉÜ„Å™„Éñ„É©„É≥„Éá„Ç£„É≥„Ç∞„ÄÇIPA„ÄÅ„Çπ„Çø„Ç¶„Éà„ÄÅ„Ç§„É≥„Éá„Ç£„Éº„Å™Èõ∞Âõ≤Ê∞ó„ÅßÊúâÂêç„ÄÇ",
      tag3: "„Ç¢„É≥„ÉÄ„Éº„Ç∞„É©„Ç¶„É≥„Éâ„Å™Èõ∞Âõ≤Ê∞ó„ÄÅ„ÇØ„É™„Éº„É≥„Å™Â∞èË¶èÊ®°ÈÜ∏ÈÄ†„ÄÇÈö†„Çå„ÅüÂêçÂ∫ó„ÄÇ",
      tag4: "Ë¶™„Åó„Åø„ÇÑ„Åô„ÅÑ„Éì„Éº„É´„Å®„É™„É©„ÉÉ„ÇØ„Çπ„Åó„ÅüÈõ∞Âõ≤Ê∞ó„ÄÇ„Ç∞„É´„Éº„Éó„ÇÑÂàùÂøÉËÄÖ„Å´ÊúÄÈÅ©„ÄÇ",
      tag5: "Ê¥óÁ∑¥„Åï„Çå„ÅüÈÜ∏ÈÄ†ÊâÄ„ÄÅÂ§ßËÉÜ„Å™„Éì„Éº„É´„ÄÅÊñôÁêÜ„ÄÅÂ±ã‰∏ä„ÄÇÂèóË≥ûÊ≠¥„ÅÇ„ÇäÔºÅ",
      tag6: "„Ç´„Ç∏„É•„Ç¢„É´„Åß„É™„Éº„Ç∫„Éä„Éñ„É´„ÄÇÂú∞ÂÖÉ„ÅÆÈõ∞Âõ≤Ê∞ó„Å´ÊúÄÈÅ©„ÄÇ",
      tag7: "„ÉÄ„Éä„É≥Áîü„Åæ„Çå„ÄÅ„Çµ„Çπ„ÉÜ„Éä„Éì„É™„ÉÜ„Ç£ÈáçË¶ñ„ÄÇÂ∏∏„Å´Êñ∞„Åó„ÅÑ‰Ωï„Åã„ÅåÔºÅ",
      tag8: "‰∏≠‰∏ñÈ¢®Á©∫Èñì„ÅÆ„Éô„É´„ÇÆ„Éº„Çπ„Çø„Ç§„É´„Éì„Éº„É´„ÄÇÂ§ß„Åç„Å™„Ç∞„É©„Çπ„Å´ÊúÄÈÅ©„ÄÇ"
    }
  };
  const t = txt[lang];

  const flags = [
    { c:'en', f:'https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Flag_of_the_United_Kingdom_%283-5%29.svg/1024px-Flag_of_the_United_Kingdom_%283-5%29.svg.png' },
    { c:'vi', f:'https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Flag_of_Vietnam.svg/2560px-Flag_of_Vietnam.svg.png' },
    { c:'ko', f:'https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/Flag_of_South_Korea.svg/1200px-Flag_of_South_Korea.svg.png' },
    { c:'ja', f:'https://upload.wikimedia.org/wikipedia/en/thumb/9/9e/Flag_of_Japan.svg/1200px-Flag_of_Japan.svg.png' }
  ];

  const breweries = [
    { id:1, name:"BIACRAFT", dist:"District 3", addr:"1 Le Ngo Cat, District 3", tagKey:"tag1", initials:"BC", color:"#e74c3c", logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSEJ3rjAkeuIS9SXX_AOFpBYyMV8A4uzehpFw&s", mapsUrl:"https://maps.google.com/?q=BiaCraft+Artisan+Ales+1+Le+Ngo+Cat+District+3+Ho+Chi+Minh", ig:"https://www.instagram.com/biacraftartisanales/", fb:"https://facebook.com/biacraft", tags:"#hcmaletrail @biacraftartisanales" },
    { id:2, name:"HEART OF DARKNESS", dist:"District 1", addr:"31D Ly Tu Trong, District 1", tagKey:"tag2", initials:"HD", color:"#2c3e50", logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQhBgGIWX_LhO8HiUMp_ds6FcPwDGJ6zC70nA&s", mapsUrl:"https://maps.google.com/?q=Heart+of+Darkness+Craft+Brewery+31D+Ly+Tu+Trong+District+1+Ho+Chi+Minh", ig:"https://instagram.com/heartofdarknessbrewery", fb:"https://facebook.com/HeartOfDarknessBrewery", tags:"#hcmaletrail @heartofdarknessbrewery" },
    { id:3, name:"DEME", dist:"District 3", addr:"201B Nam Ky Khoi Nghia, District 3", tagKey:"tag3", initials:"DM", color:"#27ae60", logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTUX4bUqOU1mTKfwynaowtTzISSkejiKNGfCQ&s", mapsUrl:"https://maps.google.com/?q=Deme+Brewing+201B+Nam+Ky+Khoi+Nghia+District+3+Ho+Chi+Minh", ig:"https://www.instagram.com/deme.brewing/", fb:"https://facebook.com/demebrewing", tags:"#hcmaletrail @deme.brewing" },
    { id:4, name:"STEERSMAN", dist:"Tan Binh", addr:"18B Cong Hoa, Tan Binh", tagKey:"tag4", initials:"SM", color:"#3498db", logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSx4fz-XwrRMVL_9VWuMyF2ityGR8FqKICrnQ&s", mapsUrl:"https://maps.google.com/?q=Steersman+Brewery+18B+Cong+Hoa+Tan+Binh+Ho+Chi+Minh", ig:"https://instagram.com/steersmanbrewery", fb:"https://facebook.com/steersmanbrewery", tags:"#hcmaletrail @steersmanbrewery" },
    { id:5, name:"EAST WEST", dist:"District 1", addr:"181-185 Ly Tu Trong, District 1", tagKey:"tag5", initials:"EW", color:"#f39c12", logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRAcbVFo_W36U7i1gPBB7zs72PJg0_nTTqSug&s", mapsUrl:"https://maps.google.com/?q=East+West+Brewing+Co+181+Ly+Tu+Trong+District+1+Ho+Chi+Minh", ig:"https://www.instagram.com/eastwestbrewery/", fb:"https://facebook.com/eastwestbrewery", tags:"#hcmaletrail @eastwestbrewery" },
    { id:6, name:"ROOSTER", dist:"District 1", addr:"31 Ho Huan Nghiep, District 1", tagKey:"tag6", initials:"RB", color:"#e67e22", logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT6zKlPzmE5Vk0yk1X4qJoz5bL5OOd4STZ8SA&s", mapsUrl:"https://maps.google.com/?q=Rooster+Beers+31+Ho+Huan+Nghiep+District+1+Ho+Chi+Minh", ig:"https://www.instagram.com/rooster.beers/", fb:"https://www.facebook.com/theroosterbeers", tags:"#hcmaletrail @rooster.beers" },
    { id:7, name:"7 BRIDGES", dist:"District 1", addr:"25 Ly Tu Trong, District 1", tagKey:"tag7", initials:"7B", color:"#9b59b6", logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSKLaEC86BnuqzhRWUjI9ef1HqIFERkjCgiUg&s", mapsUrl:"https://maps.google.com/?q=7+Bridges+Brewing+25+Ly+Tu+Trong+District+1+Ho+Chi+Minh", ig:"https://www.instagram.com/7bridgesbrewingco/", fb:"https://facebook.com/7BridgesBrewingCo", tags:"#hcmaletrail @7bridgesbrewingco" },
    { id:8, name:"BELGO", dist:"District 1", addr:"159A Nguyen Van Thu, District 1", tagKey:"tag8", initials:"BG", color:"#c0392b", logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSYUWfQCHCQqNFx-EXnsiRLKZUSW5_P2f34mQ&s", mapsUrl:"https://maps.google.com/?q=Belgo+Belgian+Craft+Beer+159A+Nguyen+Van+Thu+District+1+Ho+Chi+Minh", ig:"https://www.instagram.com/belgo_belgianbrewery/", fb:"https://www.facebook.com/BelgoLeNgoCat", tags:"#hcmaletrail @belgo_belgianbrewery" }
  ];

  const getTagline = (brewery) => t[brewery.tagKey];

  // Send data to Google Sheets
  const sendToSheets = async (data) => {
    if (!GOOGLE_SHEETS_URL || GOOGLE_SHEETS_URL === 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE') {
      console.log('Google Sheets not configured. Data:', data);
      return;
    }
    // Add client-side timestamp
    const dataWithTime = {
      ...data,
      clientTime: new Date().toISOString(),
      localTime: new Date().toLocaleString('en-US', { timeZone: 'Asia/Ho_Chi_Minh' })
    };
    try {
      await fetch(GOOGLE_SHEETS_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(dataWithTime)
      });
      console.log('Sent to Google Sheets:', dataWithTime);
    } catch (err) {
      console.log('Sheet error:', err);
    }
  };

  const validate = () => {
    if (codes[selected.id] === code.toUpperCase().trim()) {
      // If no user registered yet and this is first stamp, ask for info
      if (!userInfo?.name && stamps.length === 0) {
        setPendingStamp({ id: selected.id, brewery: selected, method: 'CODE' });
        setShowRegister(true);
        setCode('');
        setError('');
      } else {
        // Already registered, just add stamp
        const newStamps = [...stamps, selected.id];
        setStamps(newStamps);
        setCode(''); setError('');
        sendToSheets({
          type: 'stamp',
          visitorName: userInfo?.name || '',
          visitorEmail: userInfo?.email || '',
          brewery: selected.name,
          breweryId: selected.id,
          method: 'CODE',
          stampCount: newStamps.length
        });
        // Auto backup recovery link
        setTimeout(() => autoBackup(newStamps.length), 500);
        if (newStamps.length === 8) {
          setTimeout(() => {
            setSelected(null);
            setShowCompletion(true);
          }, 1000);
        }
      }
    } else setError(t.nope);
  };

  const copyTags = (tags) => {
    navigator.clipboard.writeText(tags).then(() => {
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    });
  };

  const saveBeer = () => {
    if (!beerName.trim() || beerRating === 0) return;
    const newBeer = {
      id: Date.now(),
      breweryId: selected.id,
      breweryName: selected.name,
      name: beerName,
      rating: beerRating,
      notes: beerNotes,
      date: new Date().toISOString()
    };
    setBeerLogs([...beerLogs, newBeer]);
    // Send to Google Sheets with user info
    sendToSheets({
      type: 'beer',
      visitorName: userInfo?.name || '',
      visitorEmail: userInfo?.email || '',
      brewery: selected.name,
      beerName: beerName,
      rating: beerRating,
      notes: beerNotes
    });
    setBeerName(''); setBeerRating(0); setBeerNotes('');
    setShowBeerLog(false);
  };

  // Complete registration and add first stamp
  const completeRegistration = () => {
    if (!regName.trim() || !regEmail.trim()) return;
    const info = {
      name: regName,
      email: regEmail,
      phone: regPhone,
      registeredAt: new Date().toISOString()
    };
    setUserInfo(info);
    
    // Log registration
    sendToSheets({
      type: 'registration',
      visitorName: regName,
      visitorEmail: regEmail,
      visitorPhone: regPhone,
      brewery: pendingStamp?.brewery?.name || '',
      method: pendingStamp?.method || ''
    });
    
    // Now add the pending stamp
    if (pendingStamp) {
      const newStamps = [...stamps, pendingStamp.id];
      setStamps(newStamps);
      setAutoStamped(true);
      setSelected(pendingStamp.brewery);
      
      sendToSheets({
        type: 'stamp',
        visitorName: regName,
        visitorEmail: regEmail,
        brewery: pendingStamp.brewery.name,
        breweryId: pendingStamp.id,
        method: pendingStamp.method,
        stampCount: newStamps.length
      });
      
      // Auto backup recovery link after first stamp
      setTimeout(() => autoBackup(newStamps.length), 1000);
    }
    
    setShowRegister(false);
    setRegName(''); setRegEmail(''); setRegPhone('');
    setPendingStamp(null);
  };

  const submitCompletion = () => {
    if (!completionName.trim() || !completionEmail.trim()) return;
    const info = {
      ...userInfo,
      name: completionName,
      email: completionEmail,
      phone: completionPhone,
      finalBrewery: selected?.name || 'Unknown',
      completed: true,
      completedAt: new Date().toISOString()
    };
    setUserInfo(info);
    // Send to Google Sheets
    sendToSheets({
      type: 'completion',
      visitorName: completionName,
      visitorEmail: completionEmail,
      visitorPhone: completionPhone,
      finalBrewery: selected?.name || 'Unknown'
    });
    setCompletionSubmitted(true);
  };

  const prog = (stamps.length / 8) * 100;
  const beersAtBrewery = (id) => beerLogs.filter(b => b.breweryId === id);

  // Generate recovery URL with encoded data
  const generateRecoveryUrl = () => {
    const data = { stamps, beerLogs, userInfo };
    const encoded = btoa(JSON.stringify(data));
    return window.location.origin + window.location.pathname + '?recover=' + encoded;
  };

  // Send recovery link via email
  const sendRecoveryEmail = () => {
    if (!saveEmail.trim()) return;
    const recoveryUrl = generateRecoveryUrl();
    const subject = 'HCM Ale Trail - Your Progress Recovery Link';
    const body = `Here's your HCM Ale Trail recovery link!\n\nYou have ${stamps.length}/8 stamps collected.\n\nClick this link to restore your progress:\n${recoveryUrl}\n\nKeep this email safe until you complete the trail! üç∫`;
    window.open('mailto:' + saveEmail + '?subject=' + encodeURIComponent(subject) + '&body=' + encodeURIComponent(body));
    setSaveSent(true);
    setTimeout(() => { setSaveSent(false); setShowSaveProgress(false); setSaveEmail(''); }, 3000);
  };

  // Copy recovery link
  const copyRecoveryLink = () => {
    navigator.clipboard.writeText(generateRecoveryUrl()).then(() => {
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    });
  };

  // Auto backup after each stamp - copy link and show toast
  const autoBackup = (stampCount) => {
    const recoveryUrl = generateRecoveryUrl();
    navigator.clipboard.writeText(recoveryUrl).then(() => {
      setToastMessage('‚úÖ ' + stampCount + '/8 - Recovery link copied!');
      setShowToast(true);
      setTimeout(() => setShowToast(false), 3000);
    }).catch(() => {
      // If clipboard fails, still show confirmation
      setToastMessage('‚úÖ ' + stampCount + '/8 stamps saved!');
      setShowToast(true);
      setTimeout(() => setShowToast(false), 3000);
    });
  };

  // Restore from recovery URL
  useEffect(() => {
    const params = new URLSearchParams(window.location.search);
    const recoverData = params.get('recover');
    if (recoverData) {
      try {
        const data = JSON.parse(atob(recoverData));
        if (data.stamps && Array.isArray(data.stamps)) {
          setStamps(data.stamps);
        }
        if (data.beerLogs && Array.isArray(data.beerLogs)) {
          setBeerLogs(data.beerLogs);
        }
        if (data.userInfo) {
          setUserInfo(data.userInfo);
        }
        window.history.replaceState({}, '', window.location.pathname);
        alert('Progress restored! You have ' + (data.stamps?.length || 0) + '/8 stamps.');
      } catch (err) {
        console.log('Recovery error:', err);
      }
    }
  }, []);

  // FLAGS
  const flagBtns = flags.map(f => 
    e('button', { key:f.c, onClick:()=>setLang(f.c), className:`${lang===f.c?'ring-4 ring-yellow-400 scale-110':'opacity-50'} w-16 h-10 border-2 border-black overflow-hidden transition-all` },
      e('img', { src:f.f, className:'w-full h-full object-cover' })
    )
  );

  // BREWERY LIST WITH LOGOS
  const breweryList = breweries.map(b => {
    const has = stamps.includes(b.id);
    const beerCount = beersAtBrewery(b.id).length;
    return e('div', { key:b.id, onClick:()=>setSelected(b), className:`${has?'bg-yellow-400':'bg-white'} border-4 border-black cursor-pointer active:scale-[0.98] transition-all` },
      e('div', { className:'flex items-center h-24' },
        e('div', { className:`${has?'bg-green-600':'bg-red-600'} w-16 h-full flex items-center justify-center flex-shrink-0 relative` },
          e('span', { className:'text-4xl text-yellow-400', style:block }, b.id),
          beerCount > 0 && e('div', { className:'absolute top-1 right-1 bg-orange-500 rounded-full w-5 h-5 flex items-center justify-center' },
            e('span', { className:'text-white text-xs font-bold' }, beerCount)
          )
        ),
        e('div', { className:'flex-1 px-2 py-1 flex flex-col justify-center min-w-0' },
          e('h3', { className:'text-xl sm:text-2xl md:text-3xl text-red-600 truncate', style:breweryBlock }, b.name),
          e('p', { className:'text-sm sm:text-base text-red-500', style:block }, b.dist)
        ),
        e('div', { className:'w-20 h-full flex items-center justify-center border-l-4 border-black border-dashed flex-shrink-0' },
          e('div', { 
            className:`w-16 h-16 rounded-full overflow-hidden border-3 ${has?'border-green-500':'border-gray-400'} bg-white flex items-center justify-center relative`
          },
            e('img', { 
              src: b.logo, 
              alt: b.name,
              className: `w-full h-full object-cover ${has ? '' : 'opacity-40 grayscale'}`,
              style: { display: 'block' }
            }),
            has && e('div', { className:'absolute bottom-0 right-0 bg-green-500 rounded-full w-5 h-5 flex items-center justify-center border border-white' },
              e('span', { className:'text-white text-xs font-bold' }, '‚úì')
            )
          )
        )
      )
    );
  });

  // STAR RATING COMPONENT
  const StarRating = ({value, onChange}) => e('div', { className:'flex gap-1 justify-center' },
    [1,2,3,4,5].map(i => 
      e('button', { key:i, type:'button', onClick:()=>onChange(i), className:`${i <= value ? 'text-orange-500' : 'text-gray-300'} hover:scale-110 transition-all` },
        e(Star, { size:36, filled: i <= value })
      )
    )
  );

  // FAQ MODAL
  const faqModal = showFaq && e('div', { className:'fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4' },
    e('div', { className:'bg-yellow-400 w-full max-w-sm border-4 border-black relative max-h-[85vh] overflow-y-auto' },
      e('button', { onClick:()=>setShowFaq(false), className:'absolute top-2 right-2 bg-red-600 text-yellow-400 w-10 h-10 flex items-center justify-center border-4 border-black text-2xl z-10', style:block }, 'X'),
      e('div', { className:'p-3 pt-10' },
        e('h2', { className:'text-3xl text-center text-red-600 mb-3', style:block }, t.how),
        e('div', { className:'space-y-2' },
          e('div', { className:'bg-red-600 border-2 border-black p-2 flex items-center gap-2' }, e('span',{className:'text-3xl text-yellow-400 w-10',style:block},'1'), e('span',{className:'text-lg text-yellow-400 flex-1',style:block},t.s1)),
          e('div', { className:'bg-red-600 border-2 border-black p-2 flex items-center gap-2' }, e('span',{className:'text-3xl text-yellow-400 w-10',style:block},'2'), e('div',{className:'flex-1'}, e('span',{className:'text-lg text-yellow-400 block',style:block},t.s2), e('span',{className:'text-sm text-yellow-300',style:block},t.s2a+' / '+t.s2b))),
          e('div', { className:'bg-red-600 border-2 border-black p-2 flex items-center gap-2' }, e('span',{className:'text-3xl text-yellow-400 w-10',style:block},'3'), e('span',{className:'text-lg text-yellow-400 flex-1',style:block},t.s3)),
          e('div', { className:'bg-green-600 border-2 border-black p-2 flex items-center gap-2' }, e('span',{className:'text-3xl text-white w-10',style:block},'4'), e('span',{className:'text-lg text-white flex-1',style:block},t.s4))
        ),
        e('div', { className:'bg-black border-2 border-yellow-400 p-2 mt-2' }, e('p',{className:'text-xl text-yellow-400 text-center',style:block},t.rush)),
        // TIPS SECTION
        e('div', { className:'bg-white border-2 border-black p-3 mt-3' },
          e('p', { className:'text-lg text-red-600 font-bold mb-2', style:block }, 'üí° '+t.tips),
          e('ul', { className:'text-sm text-gray-700 space-y-1' },
            e('li', null, '‚Ä¢ '+t.tip1),
            e('li', null, '‚Ä¢ '+t.tip2),
            e('li', null, '‚Ä¢ '+t.tip3)
          )
        ),
        e('button', { onClick:()=>setShowFaq(false), className:'w-full bg-red-600 text-yellow-400 py-3 mt-2 text-3xl border-4 border-black', style:block }, t.ok)
      )
    )
  );

  // QR MODAL
  const qrModal = showQR && e('div', { className:'fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4' },
    e('div', { className:'bg-yellow-400 w-full max-w-sm border-4 border-black relative' },
      e('button', { onClick:()=>setShowQR(false), className:'absolute top-2 right-2 bg-red-600 text-yellow-400 w-10 h-10 flex items-center justify-center border-4 border-black text-2xl z-10', style:block }, 'X'),
      e('div', { className:'p-3 pt-10' },
        e('div', { className:'bg-white border-4 border-black p-4 mb-2 text-center' }, e('div',{className:'text-6xl'},'üì±'), e('p',{className:'text-2xl text-black mt-2',style:block},t.ask)),
        e('div', { className:'bg-red-600 border-2 border-black p-3 mb-2' },
          e('p',{className:'text-lg text-yellow-400',style:block},'‚Ä¢ iPHONE ‚Üí CAMERA'),
          e('p',{className:'text-lg text-yellow-400',style:block},'‚Ä¢ ANDROID ‚Üí LENS'),
          e('p',{className:'text-lg text-yellow-400',style:block},'‚Ä¢ POINT ‚Üí TAP ‚Üí DONE!')
        ),
        e('button', { onClick:()=>setShowQR(false), className:'w-full bg-green-600 text-white py-4 text-3xl border-4 border-black', style:block }, t.ok)
      )
    )
  );

  // SAVE PROGRESS MODAL
  const saveProgressModal = showSaveProgress && e('div', { className:'fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4' },
    e('div', { className:'bg-yellow-400 w-full max-w-sm border-4 border-black relative' },
      e('button', { onClick:()=>{setShowSaveProgress(false);setSaveEmail('');setSaveSent(false);}, className:'absolute top-2 right-2 bg-red-600 text-yellow-400 w-10 h-10 flex items-center justify-center border-4 border-black text-2xl z-10', style:block }, 'X'),
      e('div', { className:'p-3 pt-10' },
        e('h2', { className:'text-2xl text-center text-red-600 mb-2', style:block }, 'üíæ '+t.saveProgress),
        e('p', { className:'text-center text-red-700 mb-3 text-sm' }, t.saveDesc),
        e('div', { className:'bg-white border-4 border-black p-3 mb-3 text-center' },
          e('p', { className:'text-lg font-bold text-green-600' }, stamps.length + '/8 ' + t.stamps),
          e('p', { className:'text-sm text-gray-600' }, beerLogs.length + ' ' + t.myBeers.toLowerCase())
        ),
        saveSent ? 
          e('div', { className:'bg-green-600 border-4 border-black p-4 text-center' },
            e('p', { className:'text-2xl text-white', style:block }, '‚úÖ ' + t.linkSent)
          ) :
          e('div', { className:'space-y-2' },
            e('input', { 
              type:'email', 
              value:saveEmail, 
              onChange:ev=>setSaveEmail(ev.target.value), 
              className:'w-full px-3 py-3 border-4 border-black text-lg text-center', 
              placeholder:t.emailPlaceholder 
            }),
            e('button', { 
              onClick:sendRecoveryEmail, 
              disabled:!saveEmail.trim(), 
              className:`w-full ${saveEmail.trim()?'bg-green-600':'bg-gray-400'} text-white py-3 text-xl border-4 border-black`, 
              style:block 
            }, 'üìß '+t.sendLink),
            e('div', { className:'text-center text-red-600 font-bold my-2' }, '‚Äî OR ‚Äî'),
            e('button', { 
              onClick:copyRecoveryLink, 
              className:`w-full ${copied?'bg-green-600':'bg-blue-600'} text-white py-3 text-xl border-4 border-black`, 
              style:block 
            }, copied ? '‚úÖ '+t.linkCopied : 'üìã COPY LINK')
          )
      )
    )
  );

  // REGISTRATION MODAL (shown on first stamp)
  const registerModal = showRegister && e('div', { className:'fixed inset-0 bg-black/90 z-[70] flex items-center justify-center p-4' },
    e('div', { className:'bg-yellow-400 w-full max-w-sm border-4 border-black relative' },
      e('div', { className:'p-4' },
        e('div', { className:'text-5xl text-center mb-2' }, 'üç∫üéâ'),
        e('h2', { className:'text-2xl text-center text-red-600 mb-2', style:block }, t.register),
        e('p', { className:'text-center text-red-700 mb-1 text-sm' }, t.regDesc),
        e('p', { className:'text-center text-gray-600 mb-3 text-xs italic' }, t.regNote),
        pendingStamp?.brewery && e('div', { className:'bg-green-600 border-2 border-black p-2 mb-3 text-center' },
          e('p', { className:'text-white text-sm' }, 'üìç First stop:'),
          e('p', { className:'text-yellow-300 font-bold', style:block }, pendingStamp.brewery.name)
        ),
        e('div', { className:'space-y-2' },
          e('div', null,
            e('label', { className:'text-red-600 text-sm font-bold' }, t.name+' *'),
            e('input', { type:'text', value:regName, onChange:ev=>setRegName(ev.target.value), className:'w-full px-3 py-2 border-4 border-black text-lg', placeholder:'Your name' })
          ),
          e('div', null,
            e('label', { className:'text-red-600 text-sm font-bold' }, t.email+' *'),
            e('input', { type:'email', value:regEmail, onChange:ev=>setRegEmail(ev.target.value), className:'w-full px-3 py-2 border-4 border-black text-lg', placeholder:'your@email.com' })
          ),
          e('div', null,
            e('label', { className:'text-red-600 text-sm font-bold' }, t.phone+' (optional)'),
            e('input', { type:'tel', value:regPhone, onChange:ev=>setRegPhone(ev.target.value), className:'w-full px-3 py-2 border-4 border-black text-lg', placeholder:'0901234567' })
          ),
          e('button', { onClick:completeRegistration, disabled:!regName.trim()||!regEmail.trim(), className:`w-full ${regName.trim()&&regEmail.trim()?'bg-green-600':'bg-gray-400'} text-white py-4 mt-2 text-2xl border-4 border-black`, style:block }, 'üç∫ '+t.go)
        )
      )
    )
  );

  // BEER LOG MODAL
  const beerLogModal = showBeerLog && e('div', { className:'fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4' },
    e('div', { className:'bg-yellow-400 w-full max-w-sm border-4 border-black relative' },
      e('button', { onClick:()=>{setShowBeerLog(false);setBeerName('');setBeerRating(0);setBeerNotes('');}, className:'absolute top-2 right-2 bg-red-600 text-yellow-400 w-10 h-10 flex items-center justify-center border-4 border-black text-2xl z-10', style:block }, 'X'),
      e('div', { className:'p-3 pt-10' },
        e('h2', { className:'text-2xl text-center text-red-600 mb-3', style:block }, 'üç∫ '+t.addBeer),
        e('p', { className:'text-center text-red-700 mb-2 font-bold' }, selected?.name),
        e('div', { className:'space-y-3' },
          e('div', null,
            e('label', { className:'text-red-600 text-sm font-bold' }, t.beerName),
            e('input', { type:'text', value:beerName, onChange:ev=>setBeerName(ev.target.value), className:'w-full px-3 py-2 border-4 border-black text-lg', placeholder:'e.g. Saigon Blonde' })
          ),
          e('div', null,
            e('label', { className:'text-red-600 text-sm font-bold block mb-1' }, t.rating),
            e(StarRating, { value:beerRating, onChange:setBeerRating })
          ),
          e('div', null,
            e('label', { className:'text-red-600 text-sm font-bold' }, t.notes),
            e('textarea', { value:beerNotes, onChange:ev=>setBeerNotes(ev.target.value), className:'w-full px-3 py-2 border-4 border-black text-sm', rows:2, placeholder:'Tasting notes...' })
          ),
          e('div', { className:'flex gap-2' },
            e('button', { onClick:()=>{setShowBeerLog(false);setBeerName('');setBeerRating(0);setBeerNotes('');}, className:'flex-1 bg-gray-500 text-white py-3 text-xl border-4 border-black', style:block }, t.cancel),
            e('button', { onClick:saveBeer, disabled:!beerName.trim()||beerRating===0, className:`flex-1 ${beerName.trim()&&beerRating>0?'bg-green-600':'bg-gray-400'} text-white py-3 text-xl border-4 border-black`, style:block }, t.save)
          )
        )
      )
    )
  );

  // MY BEERS MODAL
  const myBeersModal = showMyBeers && e('div', { className:'fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4' },
    e('div', { className:'bg-yellow-400 w-full max-w-sm border-4 border-black relative max-h-[80vh] overflow-y-auto' },
      e('button', { onClick:()=>setShowMyBeers(false), className:'absolute top-2 right-2 bg-red-600 text-yellow-400 w-10 h-10 flex items-center justify-center border-4 border-black text-2xl z-10', style:block }, 'X'),
      e('div', { className:'p-3 pt-10' },
        e('h2', { className:'text-2xl text-center text-red-600 mb-3', style:block }, 'üç∫ '+t.myBeers+' ('+beerLogs.length+')'),
        beerLogs.length === 0 ? 
          e('p', { className:'text-center text-red-700 py-4' }, t.noBeer) :
          e('div', { className:'space-y-2' },
            beerLogs.slice().reverse().map(beer => 
              e('div', { key:beer.id, className:'bg-white border-2 border-black p-2' },
                e('div', { className:'flex justify-between items-start' },
                  e('div', null,
                    e('p', { className:'font-bold text-red-600' }, beer.name),
                    e('p', { className:'text-xs text-gray-600' }, beer.breweryName)
                  ),
                  e('div', { className:'flex text-orange-500' },
                    [1,2,3,4,5].map(i => e(Star, { key:i, size:12, filled:i<=beer.rating }))
                  )
                ),
                beer.notes && e('p', { className:'text-xs text-gray-500 mt-1 italic' }, beer.notes)
              )
            )
          )
      )
    )
  );

  // COMPLETION MODAL
  const completionModal = showCompletion && e('div', { className:'fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4' },
    e('div', { className:'bg-yellow-400 w-full max-w-sm border-4 border-black relative' },
      !completionSubmitted && e('button', { onClick:()=>setShowCompletion(false), className:'absolute top-2 right-2 bg-red-600 text-yellow-400 w-10 h-10 flex items-center justify-center border-4 border-black text-2xl z-10', style:block }, 'X'),
      e('div', { className:'p-4' },
        e('div', { className:'text-6xl text-center mb-2' }, 'üéâüç∫üéâ'),
        e('h2', { className:'text-3xl text-center text-red-600 mb-2', style:block }, t.complete),
        completionSubmitted ? 
          e('div', { className:'text-center' },
            e('div', { className:'bg-green-600 border-4 border-black p-4 mb-3' },
              e('p', { className:'text-2xl text-white', style:block }, t.thanks),
              e('p', { className:'text-lg text-yellow-300 mt-2' }, t.collectHat)
            ),
            e('div', { className:'bg-white border-4 border-black p-3' },
              e('p', { className:'font-bold' }, userInfo?.name),
              e('p', { className:'text-sm text-gray-600' }, userInfo?.email),
              e('p', { className:'text-sm text-green-600 mt-2' }, '‚úÖ 8/8 STAMPS COLLECTED')
            ),
            e('button', { onClick:()=>setShowCompletion(false), className:'w-full bg-red-600 text-yellow-400 py-3 mt-3 text-2xl border-4 border-black', style:block }, t.ok)
          ) :
          e('div', null,
            e('p', { className:'text-center text-red-700 mb-3' }, t.completeMsg),
            e('div', { className:'space-y-2' },
              e('div', null,
                e('label', { className:'text-red-600 text-sm font-bold' }, t.name+' *'),
                e('input', { type:'text', value:completionName, onChange:ev=>setCompletionName(ev.target.value), className:'w-full px-3 py-2 border-4 border-black text-lg' })
              ),
              e('div', null,
                e('label', { className:'text-red-600 text-sm font-bold' }, t.email+' *'),
                e('input', { type:'email', value:completionEmail, onChange:ev=>setCompletionEmail(ev.target.value), className:'w-full px-3 py-2 border-4 border-black text-lg' })
              ),
              e('div', null,
                e('label', { className:'text-red-600 text-sm font-bold' }, t.phone),
                e('input', { type:'tel', value:completionPhone, onChange:ev=>setCompletionPhone(ev.target.value), className:'w-full px-3 py-2 border-4 border-black text-lg' })
              ),
              e('button', { onClick:submitCompletion, disabled:!completionName.trim()||!completionEmail.trim(), className:`w-full ${completionName.trim()&&completionEmail.trim()?'bg-green-600':'bg-gray-400'} text-white py-4 mt-2 text-2xl border-4 border-black`, style:block }, t.submit)
            )
          )
      )
    )
  );

  // BREWERY MODAL WITH BEER LOGGING
  const breweryModal = selected && !showCompletion && e('div', { className:'fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-2' },
    e('div', { className:'bg-yellow-400 w-full max-w-sm border-4 border-black relative max-h-[90vh] overflow-y-auto' },
      e('button', { onClick:()=>{setSelected(null);setCode('');setError('');setCopied(false);setAutoStamped(false);}, className:'absolute top-2 right-2 bg-red-600 text-yellow-400 w-10 h-10 flex items-center justify-center border-4 border-black text-2xl z-10', style:block }, 'X'),
      e('div', { className:'p-3 pt-12' },
        autoStamped && stamps.includes(selected.id) && e('div', { className:'bg-green-600 border-4 border-black p-3 mb-2 text-center' },
          e('p', { className:'text-2xl text-white', style:block }, 'üéâ STAMP COLLECTED!')
        ),
        e('button', { onClick:()=>setShowQR(true), className:'w-full bg-white border-4 border-red-600 p-3 mb-2 active:scale-95 transition-all' },
          e('div',{className:'text-5xl text-center'},'üì±'),
          e('p',{className:'text-2xl text-red-600 text-center',style:block},t.scan)
        ),
        e('div', { className:'bg-red-600 border-4 border-black p-3 mb-2' },
          e('h2',{className:'text-2xl sm:text-3xl text-yellow-400 text-center',style:breweryBlock},selected.name),
          e('p',{className:'text-sm text-yellow-300 mt-1 text-center'},'üìç '+selected.addr),
          e('p',{className:'text-xs text-yellow-200 mt-2 text-center italic'},getTagline(selected))
        ),
        // GOOGLE MAPS DIRECTIONS BUTTON
        e('a', { 
          href:selected.mapsUrl, 
          target:'_blank', 
          rel:'noopener noreferrer', 
          className:'w-full bg-green-600 text-white py-3 mb-2 text-xl border-4 border-black flex items-center justify-center gap-2 active:scale-95 transition-all', 
          style:block 
        }, e(MapPin,{size:24}), t.directions),
        // ADD BEER BUTTON
        e('button', { 
          onClick:()=>setShowBeerLog(true), 
          className:'w-full bg-orange-500 text-white py-3 mb-2 text-xl border-4 border-black flex items-center justify-center gap-2 active:scale-95 transition-all', 
          style:block 
        }, e(Beer,{size:24}), t.addBeer),
        // Show beers logged at this brewery
        beersAtBrewery(selected.id).length > 0 && e('div', { className:'bg-white border-2 border-black p-2 mb-2' },
          e('p', { className:'text-sm font-bold text-red-600 mb-1' }, t.beersAt+' '+selected.name+':'),
          beersAtBrewery(selected.id).map(beer => 
            e('div', { key:beer.id, className:'flex justify-between items-center text-sm py-1 border-b border-gray-200 last:border-0' },
              e('span', null, beer.name),
              e('span', { className:'flex text-orange-500' }, [1,2,3,4,5].map(i => e(Star,{key:i,size:10,filled:i<=beer.rating})))
            )
          )
        ),
        // Social buttons
        e('div', { className:'flex gap-2 mb-2' },
          e('a', { href:selected.ig, target:'_blank', rel:'noopener noreferrer', className:'flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 text-xl border-2 border-black flex items-center justify-center gap-1 active:scale-95 transition-all', style:block }, e(Instagram,{size:20}), 'IG'),
          e('a', { href:selected.fb, target:'_blank', rel:'noopener noreferrer', className:'flex-1 bg-blue-600 text-white py-3 text-xl border-2 border-black flex items-center justify-center gap-1 active:scale-95 transition-all', style:block }, e(Facebook,{size:20}), 'FB')
        ),
        // Copy tags with translated button
        e('div', { className:'bg-black border-2 border-yellow-400 p-2 mb-2' },
          e('p',{className:'text-xs text-yellow-400 text-center mb-1 font-mono'},selected.tags),
          e('button', { onClick:()=>copyTags(selected.tags), className:`w-full ${copied?'bg-green-600 text-white':'bg-yellow-400 text-black'} py-2 text-lg border-2 border-black flex items-center justify-center gap-1 active:scale-95 transition-all`, style:block }, e(Copy,{size:18}), copied?t.copied:t.copyTag)
        ),
        // Code entry or validated
        !stamps.includes(selected.id) ? 
          e('div', null,
            e('p',{className:'text-2xl text-red-600 text-center mb-1',style:block},'‚Äî '+t.code+' ‚Äî'),
            e('input', { type:'password', value:code, onChange:ev=>{setCode(ev.target.value);setError('');}, onKeyPress:ev=>{if(ev.key==='Enter')validate();}, className:'w-full px-3 py-3 text-2xl text-center uppercase border-4 border-black mb-1 bg-black text-yellow-400', style:{...block,letterSpacing:'6px'}, placeholder:'****', maxLength:'20' }),
            error && e('p',{className:'text-center text-xl text-red-600 mb-1',style:block},'‚ùå '+error),
            e('button', { onClick:validate, className:'w-full bg-green-600 text-white py-4 text-3xl border-4 border-black active:scale-95 transition-all', style:block }, t.go)
          ) :
          e('div', { className:'bg-green-600 border-4 border-black p-4 text-center' },
            e('div',{
              className:'w-20 h-20 mx-auto rounded-full overflow-hidden border-2 border-white bg-white flex items-center justify-center mb-2'
            },
              e('img', { src: selected.logo, alt: selected.name, className:'w-full h-full object-cover' })
            ),
            e('p',{className:'text-3xl text-white',style:block},t.done)
          )
      )
    )
  );

  return e('div', { className:'min-h-screen bg-red-600 p-2' },
    e('div', { className:'max-w-md mx-auto' },
      e('div', { className:'flex justify-center gap-1 mb-2' }, flagBtns),
      e('div', { className:'bg-yellow-400 border-4 border-black p-2 mb-2 text-center' },
        e('h1', { className:'text-3xl sm:text-4xl md:text-5xl text-red-600 leading-none', style:{...block,letterSpacing:'2px'} }, 'HCM ALE TRAIL'),
        e('p', { className:'text-xs text-red-700 mt-2 px-2 leading-relaxed', style:{fontFamily:'sans-serif', fontWeight:'normal', textTransform:'none', letterSpacing:'0.3px'} }, t.welcome)
      ),
      e('div', { className:'bg-black border-4 border-yellow-400 p-2 mb-2' },
        e('div', { className:'flex items-center justify-between' },
          e('span', { className:'text-2xl sm:text-3xl text-yellow-400', style:block }, t.stamps),
          e('span', { className:'text-3xl sm:text-4xl text-yellow-400', style:block }, stamps.length+'/8')
        ),
        e('div', { className:'h-3 bg-red-900 border border-yellow-400 mt-1' },
          e('div', { className:'h-full bg-green-500 transition-all', style:{width:prog+'%'} })
        ),
        stamps.length > 0 && e('button', { onClick:()=>setShowSaveProgress(true), className:'w-full bg-blue-600 text-white py-2 mt-2 text-sm border-2 border-yellow-400 flex items-center justify-center gap-1', style:block }, 'üíæ '+t.saveProgress),
        stamps.length === 8 && !userInfo?.completed && e('button', { onClick:()=>setShowCompletion(true), className:'w-full bg-green-600 text-white py-2 mt-2 text-lg border-2 border-yellow-400 animate-pulse', style:block }, 'üéâ '+t.complete+' '+t.submit+'!')
      ),
      e('div', { className:'grid grid-cols-4 gap-1 mb-1' },
        e('button', { onClick:()=>setShowFaq(true), className:'bg-yellow-400 text-red-600 py-2 text-sm border-4 border-black active:scale-95 transition-all', style:block }, t.faq),
        e('a', { href:links.website, target:'_blank', rel:'noopener noreferrer', className:'bg-black text-yellow-400 py-2 text-sm border-4 border-yellow-400 active:scale-95 transition-all text-center flex items-center justify-center', style:block }, t.web),
        e('a', { href:links.maps, target:'_blank', rel:'noopener noreferrer', className:'bg-green-600 text-white py-2 text-sm border-4 border-black active:scale-95 transition-all text-center flex items-center justify-center', style:block }, t.maps),
        e('button', { onClick:()=>setShowMyBeers(true), className:'bg-orange-500 text-white py-2 text-xs border-4 border-black active:scale-95 transition-all relative flex items-center justify-center gap-1', style:block }, 
          t.myBeers,
          beerLogs.length > 0 && e('span', { className:'absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center' }, beerLogs.length)
        )
      ),
      e('div', { className:'grid grid-cols-2 gap-1 mb-2' },
        e('a', { href:links.ig, target:'_blank', rel:'noopener noreferrer', className:'bg-gradient-to-r from-purple-600 via-pink-600 to-orange-500 text-white py-2 text-sm border-4 border-black active:scale-95 transition-all text-center flex items-center justify-center gap-1', style:block }, e(Instagram,{size:18}), 'INSTAGRAM'),
        e('a', { href:links.msg, target:'_blank', rel:'noopener noreferrer', className:'bg-blue-500 text-white py-2 text-sm border-4 border-black active:scale-95 transition-all text-center flex items-center justify-center gap-1', style:block }, e(Messenger,{size:18}), 'MESSENGER')
      ),
      e('div', { className:'space-y-1' }, breweryList),
      e('div', { className:'mt-2 text-center' }, e('p',{className:'text-lg text-yellow-400',style:block},t.copy))
    ),
    faqModal,
    qrModal,
    saveProgressModal,
    registerModal,
    beerLogModal,
    myBeersModal,
    completionModal,
    breweryModal,
    // Toast notification
    showToast && e('div', { className:'fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-lg border-4 border-black shadow-lg z-[80] animate-pulse' },
      e('p', { className:'text-lg font-bold text-center', style:block }, toastMessage)
    )
  );
}

ReactDOM.render(e(App), document.getElementById('root'));
    </script>
</body>
</html>
